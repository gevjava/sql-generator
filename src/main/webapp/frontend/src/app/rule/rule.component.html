<section class="issuer_section">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-2"></div>
      <div class="col-md-8">
        <div class="card">
          <div class="card-body">
            <div class="wrapper">

              <form [formGroup]="ruleForm" (ngSubmit)="sendRuleData()">
                <table class="table">
                  <thead class="thead-dark">
                  <tr>
                    <th scope="col">CreatedBy</th>
                    <th scope="col">Description</th>
                    <th scope="col">LastUpdateBy</th>
                    <th scope="col">Name</th>
                    <th scope="col">UpdateState</th>
                    <th scope="col">OrderRule</th>
                    <th scope="col">Profile</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr>
                    <td>
                      <input class="form-control" type="text" formControlName="createdBy" name="createdBy">
                    </td>
                    <td>
                      <input class="form-control" type="text" formControlName="description" name="description">
                    </td>
                    <td>
                      <input class="form-control" type="text" formControlName="lastUpdateBy" name="lastUpdateBy">
                    </td>
                    <td>
                      <input class="form-control" type="text" formControlName="name" name="name">
                    </td>
                    <td>
                      <div class="form-group">
                        <select class="form-select" type="text" formControlName="updateState" name="updateState">
                          <option selected></option>
                          <option value="0">PUSHED_TO_CONFIG</option>
                          <option value="1">WAITING_FOR_PUSH</option>
                          <option value="2">WAITING_VALIDATION</option>
                        </select>
                      </div>
                    </td>
                    <td>
                      <input class="form-control" type="number" formControlName="orderRule" name="orderRule">
                    </td>
                    <td>
                      <div class="form-group col-md-4">
                        <select id="transaction-profile-id"
                                class="form-select" title="Choose an issuer code" formControlName="profile_id" name="profile_id" style="">
                          <option label="* - All" value="" selected="selected">* - All</option>
                          <option *ngFor="let profile of profiles;" value="{{ profile.id }}">{{ profile.name }}</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  </tbody>
                </table>

                <div class="form-group text-center ">
                  <button type="submit" [disabled]="!ruleForm.valid" class="btn btn-primary btn-block">Generate SQL
                  </button>
                <div class="row  text-center" *ngIf="filename">
                  <div class="col"> <br>
                    <button class="btn btn-primary btn-block" type="button" (click)="downloadFile()">Download - {{filename}}</button>
                  </div>
                </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-2"></div>
    </div>
  </div>
</section>

<div class="container">
  <div class="row">
    <div class="col" style="overflow: auto;">
      <div *ngFor="let rule of rules;" class="wrapper">
        <table class="table table-bordered">
          <thead>
          <tr>
            <th scope="col">Id</th>
            <th scope="col">Description</th>
            <th scope="col">Name</th>
            <th scope="col">UpdateState</th>
            <th scope="col">Actions</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <th scope="row">{{ rule.id }}</th>
            <td>{{ rule.description }}</td>
            <td>{{ rule.name }}</td>
            <td>{{ rule.updateState }}</td>
            <div class="form-group">
              <a routerLink="/rule/edit/{{ rule.id }}"  class="btn btn-outline-primary" style="border: none;"><i style="font-size: 2rem; " class="fa fa-pencil-square-o"></i></a>
              <a routerLink="/rule/delete/{{ rule.id }}/{{ rule.profile['id'] }}" class="btn btn-outline-primary" style="border: none;"><i style="font-size: 2rem; " class="fa fa-trash-o"></i></a>
            </div>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>




